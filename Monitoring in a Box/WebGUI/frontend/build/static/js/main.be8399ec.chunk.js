(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(52),i=a.n(s),r=(a(63),a(3)),l=a(4),c=a(6),p=a(5),u=a(7),d=a(8),m=a.n(d),h=(a(64),a(65),a(19)),S=a(17),f=a(12),g=a(53),v=a.n(g),y=a(1),_=a.n(y),C=a(9),b=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).login=a.login.bind(Object(f.a)(a)),a.state={redirect:!1,session_checked:!1,loadSpinner:!1,feedback:"",feedback2:""},a.checkSessionKey=a.checkSessionKey.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.checkSessionKey()}},{key:"checkSessionKey",value:function(){if("undefined"!==typeof window.localStorage.session_key&&""!==window.localStorage.session_key){var e={session_key:window.localStorage.session_key},t=this;_.a.ajax({type:"POST",url:m.a.BACKEND_WS_VALIDATE_SESSION_URL,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){var a=JSON.parse(e.res);t.props.setGlobalState({is_admin:a.is_admin,username:a.username,session_checked:!0},"Login"),t.setState({redirect:!0})}else window.localStorage.session_key="",t.setState({session_checked:!0})},error:function(e,a,n){console.log("failed!"),window.localStorage.session_key="",t.setState({session_checked:!0})}})}else this.setState({session_checked:!0})}},{key:"login",value:function(e){this.setState({loadSpinner:!0,feedback:"",feedback2:""});var t={username:_()("#username")[0].value,password:_()("#password")[0].value},a=this;_.a.ajax({type:"POST",url:m.a.BACKEND_WS_LOGIN_URL,data:JSON.stringify(t),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){var t=JSON.parse(e.res);window.localStorage.session_key=t.session_key,a.props.setGlobalState({is_admin:t.is_admin,username:t.username}),a.setState({redirect:!0})}else{var n=JSON.parse(e.res);a.setState({feedback:0!==n.error_code?"Error: "+n.error_code:"",feedback2:"undefined"!==typeof n.status?n.status:"",loadSpinner:!1})}},error:function(e,t,n){a.setState({feedback:"Request failed",loadSpinner:!1})},complete:function(){}}),e.preventDefault()}},{key:"renderRedirect",value:function(){if(this.state.redirect)return o.a.createElement(S.a,{to:"/main"})}},{key:"renderFeedback",value:function(){return this.state.loadSpinner?o.a.createElement(C.a,{icon:"spinner",spin:!0}):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{id:"feedback",style:{color:"yellow"}},this.state.feedback,o.a.createElement("br",null),this.state.feedback2))}},{key:"renderContents",value:function(){if(this.state.session_checked)return o.a.createElement("div",null,o.a.createElement("img",{src:v.a,alt:"logo"}),o.a.createElement("div",{id:"loginContainer"},o.a.createElement("form",{onSubmit:this.login},o.a.createElement("input",{className:"login_input",id:"username",type:"text",placeholder:"Employee ID"}),o.a.createElement("br",null),o.a.createElement("input",{className:"login_input",id:"password",type:"password",placeholder:"Password"}),o.a.createElement("br",null),o.a.createElement("button",{className:"login_input",id:"submit"},"Sign in")),this.renderFeedback()))}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderRedirect(),this.renderContents())}}]),t}(o.a.Component),k=(a(72),a(56)),E=a.n(k),w=a(23),P=a.n(w),B=null,N=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState({fileContents:e})},a.state={initialized:!1,isDisplaying:!1,displayTimestamp:Date.now(),minApiDelayMS:500,fileContents:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){"undefined"!==typeof this.props.globalState&&(this.props.systemSettingsNavState.prometheus_endpoints_selected!==this.state.isDisplaying&&(this.setState({isDisplaying:this.props.systemSettingsNavState.prometheus_endpoints_selected,displayTimestamp:Date.now()}),this.props.systemSettingsNavState.prometheus_endpoints_selected&&!this.state.initialized&&(this.prometheusEndpointsApiQueue_retrieveData(0),this.setState({initialized:!0}))),this.state.isDisplaying&&this.state.initialized&&this.props.globalState.socket_prometheus_endpoints_updated&&(this.prometheusEndpointsApiQueue_retrieveData(0),this.props.setGlobalState({socket_prometheus_endpoints_updated:!1},"Prometheus_Endpoints")))}},{key:"prometheusEndpointsApiQueue_retrieveData",value:function(e){var t=this;clearTimeout(B),B=setTimeout((function(){t.retrieveData(e)}),t.state.minApiDelayMS)}},{key:"retrieveData",value:function(e){var t={session_key:window.localStorage.session_key,file_name:1===e?"prometheus_endpoints":"prometheus_endpoints_draft"};console.log(t);var a=this;this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Prometheus_Endpoints"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_GET_FILE_CONTENTS,data:JSON.stringify(t),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if(console.log(e),"success"===e.status){var t=JSON.parse(e.res);a.displayFileContents(t.status)}},error:function(e,t,a){console.log("failed!")},complete:function(){setTimeout((function(){a.props.setPopupState({popup1:{show:!1,title:"",content:"",mode:"common",hasCloseBtn:!0}},"Prometheus_Endpoints")}),500)}})}},{key:"uploadDataConfirmation",value:function(){this.props.setPopupState({popupConfirmation:{show:!0,title:"Proceed to save?",yesCallback:this.uploadData.bind(this),yesButtonValue:"",noCallback:"close",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Endpoints")}},{key:"uploadData",value:function(){var e=this.state.fileContents,t={session_key:window.localStorage.session_key,file_name:"prometheus_endpoints_draft",contents:e},a=this;this.props.setPopupState({popupConfirmation:{show:!1,title:"",yesCallback:"",yesButtonValue:"",noCallback:"",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Endpoints"),this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Prometheus_Endpoints"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_UPDATE_FILE_CONTENTS,data:JSON.stringify(t),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){JSON.parse(e.res);a.props.setPopupState({popup1:{show:!0,title:"Updated",content:"",mode:"admin",hasCloseBtn:!0}},"Prometheus_Endpoints")}},error:function(e,t,a){console.log("failed!")},complete:function(){setTimeout((function(){a.props.setPopupState({popup1:{show:!1,title:"",content:"",mode:"common",hasCloseBtn:!0}},"Prometheus_Endpoints")}),500)}})}},{key:"reloadServiceConfirmation",value:function(){this.props.setPopupState({popupConfirmation:{show:!0,title:"Proceed to apply?",yesCallback:this.reloadService.bind(this),yesButtonValue:"",noCallback:"close",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Endpoints")}},{key:"reloadService",value:function(){var e={session_key:window.localStorage.session_key,service_name:"reload_prometheus_endpoints"},t=this;this.props.setPopupState({popupConfirmation:{show:!1,title:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Endpoints"),this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Prometheus_Endpoints"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_RELOAD_SERVICE,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){var a=JSON.parse(e.res);0===a.status?t.props.setPopupState({popup1:{show:!0,title:"Reloaded",content:"",mode:"admin",hasCloseBtn:!0}},"Prometheus_Endpoints"):1===a.status?t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"The new configuration is rejected by the server!",mode:"admin",hasCloseBtn:!0}},"Prometheus_Endpoints"):t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"Server script has error(s)!",mode:"admin",hasCloseBtn:!0}},"Prometheus_Endpoints")}},error:function(e,a,n){console.log("failed!"),t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"Unable to connect to server or the server has an internal error!",mode:"admin",hasCloseBtn:!0}},"Prometheus_Endpoints")},complete:function(){}})}},{key:"displayFileContents",value:function(e){this.setState({fileContents:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"MainContentWrapper"},o.a.createElement("p",{className:"MainContentTitle2"},"Prometheus Endpoints"),o.a.createElement("div",{className:"MainContentBody"},o.a.createElement("div",{id:"parameters-table-div"},o.a.createElement(P.a,{value:this.state.fileContents,onValueChange:function(t){return e.onChange(t)},highlight:function(e){return function(){}},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14,backgroundColor:"#fafafa",height:"90%",color:"black"}}),o.a.createElement("button",{className:"BlueSubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:this.reloadServiceConfirmation.bind(this)},"Apply draft and Reload Prometheus"),o.a.createElement("button",{className:"GreenSubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:this.uploadDataConfirmation.bind(this)},"Save draft"),o.a.createElement("button",{className:"GreySubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:function(){this.prometheusEndpointsApiQueue_retrieveData(0)}.bind(this)},"Retrieve saved draft"),o.a.createElement("button",{className:"GreySubmitBtn",id:"uploadBtn",style:{float:"right"},onClick:function(){this.prometheusEndpointsApiQueue_retrieveData(1)}.bind(this)},"Retrieve last applied config"))))}}]),t}(o.a.Component),O=null,D=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState({fileContents:e})},a.state={initialized:!1,isDisplaying:!1,displayTimestamp:Date.now(),minApiDelayMS:500,fileContents:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){"undefined"!==typeof this.props.globalState&&(this.props.systemSettingsNavState.prometheus_rules_selected!==this.state.isDisplaying&&(this.setState({isDisplaying:this.props.systemSettingsNavState.prometheus_rules_selected,displayTimestamp:Date.now()}),this.props.systemSettingsNavState.prometheus_rules_selected&&!this.state.initialized&&(this.prometheusRulesApiQueue_retrieveData(0),this.setState({initialized:!0}))),this.state.isDisplaying&&this.state.initialized&&this.props.globalState.socket_prometheus_rules_updated&&(this.prometheusRulesApiQueue_retrieveData(0),this.props.setGlobalState({socket_prometheus_rules_updated:!1},"Prometheus_Rules")))}},{key:"prometheusRulesApiQueue_retrieveData",value:function(e){var t=this;clearTimeout(O),O=setTimeout((function(){t.retrieveData(e)}),t.state.minApiDelayMS)}},{key:"retrieveData",value:function(e){var t={session_key:window.localStorage.session_key,file_name:1===e?"prometheus_rules":"prometheus_rules_draft"};console.log(t);var a=this;this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Prometheus_Rules"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_GET_FILE_CONTENTS,data:JSON.stringify(t),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if(console.log(e),"success"===e.status){var t=JSON.parse(e.res);a.displayFileContents(t.status)}},error:function(e,t,a){console.log("failed!")},complete:function(){setTimeout((function(){a.props.setPopupState({popup1:{show:!1,title:"",content:"",mode:"common",hasCloseBtn:!0}},"Prometheus_Rules")}),500)}})}},{key:"uploadDataConfirmation",value:function(){this.props.setPopupState({popupConfirmation:{show:!0,title:"Proceed to save?",yesCallback:this.uploadData.bind(this),yesButtonValue:"",noCallback:"close",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Rules")}},{key:"uploadData",value:function(){var e=this.state.fileContents,t={session_key:window.localStorage.session_key,file_name:"prometheus_rules_draft",contents:e},a=this;this.props.setPopupState({popupConfirmation:{show:!1,title:"",yesCallback:"",yesButtonValue:"",noCallback:"",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Rules"),this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Prometheus_Rules"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_UPDATE_FILE_CONTENTS,data:JSON.stringify(t),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){JSON.parse(e.res);a.props.setPopupState({popup1:{show:!0,title:"Updated",content:"",mode:"admin",hasCloseBtn:!0}},"Prometheus_Rules")}},error:function(e,t,a){console.log("failed!")},complete:function(){setTimeout((function(){a.props.setPopupState({popup1:{show:!1,title:"",content:"",mode:"common",hasCloseBtn:!0}},"Prometheus_Rules")}),500)}})}},{key:"reloadServiceConfirmation",value:function(){this.props.setPopupState({popupConfirmation:{show:!0,title:"Proceed to apply?",yesCallback:this.reloadService.bind(this),yesButtonValue:"",noCallback:"close",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Rules")}},{key:"reloadService",value:function(){var e={session_key:window.localStorage.session_key,service_name:"reload_prometheus_rules"},t=this;this.props.setPopupState({popupConfirmation:{show:!1,title:"",mode:"admin",hasCloseBtn:!1}},"Prometheus_Rules"),this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Prometheus_Rules"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_RELOAD_SERVICE,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){var a=JSON.parse(e.res);0===a.status?t.props.setPopupState({popup1:{show:!0,title:"Reloaded",content:"",mode:"admin",hasCloseBtn:!0}},"Prometheus_Rules"):1===a.status?t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"The new configuration is rejected by the server!",mode:"admin",hasCloseBtn:!0}},"Prometheus_Rules"):t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"Server script has error(s)!",mode:"admin",hasCloseBtn:!0}},"Prometheus_Rules")}},error:function(e,a,n){console.log("failed!"),t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"Unable to connect to server or the server has an internal error!",mode:"admin",hasCloseBtn:!0}},"Prometheus_Rules")},complete:function(){}})}},{key:"displayFileContents",value:function(e){this.setState({fileContents:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"MainContentWrapper"},o.a.createElement("p",{className:"MainContentTitle2"},"Prometheus Rules"),o.a.createElement("div",{className:"MainContentBody"},o.a.createElement("div",{id:"parameters-table-div"},o.a.createElement(P.a,{value:this.state.fileContents,onValueChange:function(t){return e.onChange(t)},highlight:function(e){return function(){}},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14,backgroundColor:"#fafafa",height:"90%",color:"black"}}),o.a.createElement("button",{className:"BlueSubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:this.reloadServiceConfirmation.bind(this)},"Apply draft and Reload Prometheus"),o.a.createElement("button",{className:"GreenSubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:this.uploadDataConfirmation.bind(this)},"Save draft"),o.a.createElement("button",{className:"GreySubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:function(){this.prometheusRulesApiQueue_retrieveData(0)}.bind(this)},"Retrieve saved draft"),o.a.createElement("button",{className:"GreySubmitBtn",id:"uploadBtn",style:{float:"right"},onClick:function(){this.prometheusRulesApiQueue_retrieveData(1)}.bind(this)},"Retrieve last applied config"))))}}]),t}(o.a.Component),j=null,T=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onChange=function(e){a.setState({fileContents:e})},a.state={initialized:!1,isDisplaying:!1,displayTimestamp:Date.now(),minApiDelayMS:500,fileContents:""},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){"undefined"!==typeof this.props.globalState&&(this.props.systemSettingsNavState.alertmanager_config_selected!==this.state.isDisplaying&&(this.setState({isDisplaying:this.props.systemSettingsNavState.alertmanager_config_selected,displayTimestamp:Date.now()}),this.props.systemSettingsNavState.alertmanager_config_selected&&!this.state.initialized&&(this.alertmanagerConfigApiQueue_retrieveData(0),this.setState({initialized:!0}))),this.state.isDisplaying&&this.state.initialized&&this.props.globalState.socket_alertmanager_config_updated&&(this.alertmanagerConfigApiQueue_retrieveData(0),this.props.setGlobalState({socket_alertmanager_config_updated:!1},"Alertmanager_Config")))}},{key:"alertmanagerConfigApiQueue_retrieveData",value:function(e){var t=this;clearTimeout(j),j=setTimeout((function(){t.retrieveData(e)}),t.state.minApiDelayMS)}},{key:"retrieveData",value:function(e){var t={session_key:window.localStorage.session_key,file_name:1===e?"alertmanager_config":"alertmanager_config_draft"};console.log(t);var a=this;this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Alertmanager_Config"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_GET_FILE_CONTENTS,data:JSON.stringify(t),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if(console.log(e),"success"===e.status){var t=JSON.parse(e.res);a.displayFileContents(t.status)}},error:function(e,t,a){console.log("failed!")},complete:function(){setTimeout((function(){a.props.setPopupState({popup1:{show:!1,title:"",content:"",mode:"common",hasCloseBtn:!0}},"Alertmanager_Config")}),500)}})}},{key:"uploadDataConfirmation",value:function(){this.props.setPopupState({popupConfirmation:{show:!0,title:"Proceed to save?",yesCallback:this.uploadData.bind(this),yesButtonValue:"",noCallback:"close",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Alertmanager_Config")}},{key:"uploadData",value:function(){var e=this.state.fileContents,t={session_key:window.localStorage.session_key,file_name:"alertmanager_config_draft",contents:e},a=this;this.props.setPopupState({popupConfirmation:{show:!1,title:"",yesCallback:"",yesButtonValue:"",noCallback:"",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Alertmanager_Config"),this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Alertmanager_Config"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_UPDATE_FILE_CONTENTS,data:JSON.stringify(t),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){JSON.parse(e.res);a.props.setPopupState({popup1:{show:!0,title:"Updated",content:"",mode:"admin",hasCloseBtn:!0}},"Alertmanager_Config")}},error:function(e,t,a){console.log("failed!")},complete:function(){setTimeout((function(){a.props.setPopupState({popup1:{show:!1,title:"",content:"",mode:"common",hasCloseBtn:!0}},"Alertmanager_Config")}),500)}})}},{key:"reloadServiceConfirmation",value:function(){this.props.setPopupState({popupConfirmation:{show:!0,title:"Proceed to apply?",yesCallback:this.reloadService.bind(this),yesButtonValue:"",noCallback:"close",noButtonValue:"",mode:"admin",hasCloseBtn:!1}},"Alertmanager_Config")}},{key:"reloadService",value:function(){var e={session_key:window.localStorage.session_key,service_name:"reload_alertmanager"},t=this;this.props.setPopupState({popupConfirmation:{show:!1,title:"",mode:"admin",hasCloseBtn:!1}},"Alertmanager_Config"),this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Alertmanager_Config"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_RELOAD_SERVICE,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){var a=JSON.parse(e.res);0===a.status?t.props.setPopupState({popup1:{show:!0,title:"Reloaded",content:"",mode:"admin",hasCloseBtn:!0}},"Alertmanager_Config"):1===a.status?t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"The new configuration is rejected by the server!",mode:"admin",hasCloseBtn:!0}},"Alertmanager_Config"):t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"Server script has error(s)!",mode:"admin",hasCloseBtn:!0}},"Alertmanager_Config")}},error:function(e,a,n){console.log("failed!"),t.props.setPopupState({popup1:{show:!0,title:"Failed to reload",content:"Unable to connect to server or the server has an internal error!",mode:"admin",hasCloseBtn:!0}},"Alertmanager_Config")},complete:function(){}})}},{key:"displayFileContents",value:function(e){this.setState({fileContents:e})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"MainContentWrapper"},o.a.createElement("p",{className:"MainContentTitle2"},"Alertmanager Config"),o.a.createElement("div",{className:"MainContentBody"},o.a.createElement("div",{id:"parameters-table-div"},o.a.createElement(P.a,{value:this.state.fileContents,onValueChange:function(t){return e.onChange(t)},highlight:function(e){return function(){}},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:14,backgroundColor:"#fafafa",height:"90%",color:"black"}}),o.a.createElement("button",{className:"BlueSubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:this.reloadServiceConfirmation.bind(this)},"Apply draft and Reload Alertmanager"),o.a.createElement("button",{className:"GreenSubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:this.uploadDataConfirmation.bind(this)},"Save draft"),o.a.createElement("button",{className:"GreySubmitBtn",id:"uploadBtn",style:{float:"right",marginLeft:"10px"},onClick:function(){this.alertmanagerConfigApiQueue_retrieveData(0)}.bind(this)},"Retrieve saved draft"),o.a.createElement("button",{className:"GreySubmitBtn",id:"uploadBtn",style:{float:"right"},onClick:function(){this.alertmanagerConfigApiQueue_retrieveData(1)}.bind(this)},"Retrieve last applied config"))))}}]),t}(o.a.Component),A=(a(73),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).makeSelection=a.makeSelection.bind(Object(f.a)(a)),a.state={isDisplaying:!1,displayTimestamp:Date.now(),nav:{prometheus_endpoints_selected:!1,prometheus_rules_selected:!1,alertmanager_config_selected:!1}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){"undefined"!==typeof this.props.globalState&&"undefined"!==typeof this.props.globalState.nav&&this.props.globalState.nav.systemSettings_selected!==this.state.isDisplaying&&this.setState({isDisplaying:this.props.globalState.nav.systemSettings_selected,displayTimestamp:Date.now()})}},{key:"makeSelection",value:function(e){var t={};for(var a in this.state.nav)t[a]=!1;switch(e.target.id){case"nav_prometheus_endpoints":this.state.nav.prometheus_endpoints_selected||(t.prometheus_endpoints_selected=!0),this.setState({nav:t});break;case"nav_prometheus_rules":this.state.nav.prometheus_rules_selected||(t.prometheus_rules_selected=!0),this.setState({nav:t});break;case"nav_alertmanager_config":this.state.nav.alertmanager_config_selected||(t.alertmanager_config_selected=!0),this.setState({nav:t});break;default:console.log("Wrong Nav Selection!")}}},{key:"getButtonClass",value:function(e){var t="";if("undefined"!==typeof this.state.nav)switch(e){case"nav_prometheus_endpoints":t=this.state.nav.prometheus_endpoints_selected?"AdminNavigationBtn NavigationBtnActive ":"AdminNavigationBtn ",this.state.isDisplaying||(t+="MenuBtn-SlideOut ");break;case"nav_prometheus_rules":t=this.state.nav.prometheus_rules_selected?"AdminNavigationBtn NavigationBtnActive ":"AdminNavigationBtn ",this.state.isDisplaying||(t+="MenuBtn-SlideOut ");break;case"nav_alertmanager_config":t=this.state.nav.alertmanager_config_selected?"AdminNavigationBtn NavigationBtnActive ":"AdminNavigationBtn ",this.state.isDisplaying||(t+="MenuBtn-SlideOut ");break;default:console.log("Unhandled case!")}return t}},{key:"getButtonStyle",value:function(e){return{transitionDelay:.1*e+"s",transitionDuration:.1*e+1.2+"s",transitionProperty:"transform"}}},{key:"getDivClass",value:function(e){var t="system-settings-content-div ";return this.state.nav[e+"_selected"]||(t+="system-settings-content-div-SlideOut "),t}},{key:"renderMenuBars",value:function(){return o.a.createElement("div",{id:"system-settings-menu"},o.a.createElement("button",{className:this.getButtonClass("nav_prometheus_endpoints"),id:"nav_prometheus_endpoints",onClick:this.makeSelection,style:this.getButtonStyle(1)},o.a.createElement(C.a,{style:{fontSize:"1.6em",float:"left",position:"relative",marginRight:"10px"},icon:"map-marker-alt"}),"Prometheus Endpoints"),o.a.createElement("button",{className:this.getButtonClass("nav_prometheus_rules"),id:"nav_prometheus_rules",onClick:this.makeSelection,style:this.getButtonStyle(2)},o.a.createElement(C.a,{style:{fontSize:"1.6em",float:"left",position:"relative",marginRight:"10px"},icon:"exclamation-triangle"}),"Prometheus Rules"),o.a.createElement("button",{className:this.getButtonClass("nav_alertmanager_config"),id:"nav_alertmanager_config",onClick:this.makeSelection,style:this.getButtonStyle(3)},o.a.createElement(C.a,{style:{fontSize:"1.6em",float:"left",position:"relative",marginRight:"10px"},icon:"cogs"}),"Alertmanager Config"))}},{key:"renderContent",value:function(){return o.a.createElement("div",{id:"system-settings-content-wrapper"},o.a.createElement("div",{className:this.getDivClass("prometheus_endpoints")},o.a.createElement(N,{style:{position:"absolute"},setGlobalState:this.props.setGlobalState,setPopupState:this.props.setPopupState,globalState:this.props.globalState,systemSettingsNavState:this.state.nav})),o.a.createElement("div",{className:this.getDivClass("prometheus_rules")},o.a.createElement(D,{setGlobalState:this.props.setGlobalState,setPopupState:this.props.setPopupState,globalState:this.props.globalState,systemSettingsNavState:this.state.nav})),o.a.createElement("div",{className:this.getDivClass("alertmanager_config")},o.a.createElement(T,{setGlobalState:this.props.setGlobalState,setPopupState:this.props.setPopupState,globalState:this.props.globalState,systemSettingsNavState:this.state.nav})))}},{key:"render",value:function(){return o.a.createElement("div",{className:"MainContentWrapper"},o.a.createElement("p",{className:"MainContentTitle"},"System Settings"),o.a.createElement("div",{className:"MainContentBody"},this.renderMenuBars(),this.renderContent()))}}]),t}(o.a.Component)),R=a(21),L=(a(74),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={isDisplaying:!1,displayTimestamp:Date.now(),changePassword:{showChangePassword:!1,secrets:{}}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"handleChangePasswordBtnClick",value:function(){_()("input.passwordChangeElement").each((function(e){_()(this).val("")})),this.setState((function(e){return{changePassword:Object(R.a)({},e.changePassword,{showChangePassword:!e.changePassword.showChangePassword})}}))}},{key:"handleChangePasswordSubmitClick",value:function(e){e.preventDefault();var t={oldPassword:_()("#password_old")[0].value,newPassword:_()("#password_new")[0].value,newPassword2:_()("#password_new2")[0].value};""!==t.oldPassword&&""!==t.newPassword&&""!==t.newPassword2?t.newPassword===t.newPassword2?t.oldPassword!==t.newPassword?(this.setState((function(e){return{changePassword:Object(R.a)({},e.changePassword,{secrets:t})}})),this.props.setPopupState({popupConfirmation:{show:!0,title:"Proceed to change password?",yesCallback:this.changePassword.bind(this),yesButtonValue:"",noCallback:"close",noButtonValue:"",mode:"common",hasCloseBtn:!1}},"AccountSettings")):this.props.setPopupState({popup1:{show:!0,title:"Notification",content:"New password must be different from old password!",mode:"common",hasCloseBtn:!0}},"AccountSettings"):this.props.setPopupState({popup1:{show:!0,title:"Notification",content:"New passwords do not match!",mode:"common",hasCloseBtn:!0}},"AccountSettings"):this.props.setPopupState({popup1:{show:!0,title:"Notification",content:"All fields are required!",mode:"common",hasCloseBtn:!0}},"AccountSettings")}},{key:"componentDidUpdate",value:function(){"undefined"!==typeof this.props.globalState&&"undefined"!==typeof this.props.globalState.nav&&this.props.globalState.nav.accountSettings_selected!==this.state.isDisplaying&&(this.setState({isDisplaying:this.props.globalState.nav.accountSettings_selected,displayTimestamp:Date.now()}),this.props.globalState.nav.accountSettings_selected||_()("input.passwordChangeElement").each((function(e){_()(this).val("")})))}},{key:"changePassword",value:function(){_()("input.passwordChangeElement").each((function(e){_()(this).val("")})),this.props.setPopupState({popupConfirmation:{show:!1},popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"AccountSettings");var e={session_key:window.localStorage.session_key,old_password:this.state.changePassword.secrets.oldPassword,new_password:this.state.changePassword.secrets.newPassword},t=this;_.a.ajax({type:"POST",url:m.a.BACKEND_WS_CHANGE_PASSWORD,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status)t.props.setPopupState({popup1:{show:!0,title:"Notification",content:"Password changed",mode:"common",hasCloseBtn:!0}},"AccountSettings"),t.handleChangePasswordBtnClick();else{var a=JSON.parse(e.res),n=o.a.createElement("div",null,o.a.createElement("span",null,0!==a.error_code?"Error: "+a.error_code+", ":" ","undefined"!==typeof a.status?a.status:""));t.props.setPopupState({popup1:{show:!0,title:"Notification",content:n,mode:"common",hasCloseBtn:!0}},"AccountSettings")}},error:function(e,a,n){t.props.setPopupState({popup1:{show:!0,title:"Notification",content:"Request failed",mode:"common",hasCloseBtn:!0}},"AccountSettings")},complete:function(){}})}},{key:"getDivClass",value:function(e){var t="";switch(e){case"changePasswordContentDiv":t=this.state.changePassword.showChangePassword?"changePasswordContentDiv":"changePasswordContentDiv changePasswordContentDiv-SlideUp";break;case"changePasswordBtn":t=this.state.changePassword.showChangePassword?"changePasswordBtn-expanded":"changePasswordBtn-collapsed"}return t}},{key:"renderChangePasswordDiv",value:function(){return o.a.createElement("div",{className:this.getDivClass("changePasswordContentDiv")},o.a.createElement("form",{onSubmit:this.handleChangePasswordSubmitClick.bind(this)},o.a.createElement("input",{id:"password_old",className:"passwordChangeElement",type:"password",placeholder:"old password"}),o.a.createElement("br",null),o.a.createElement("input",{id:"password_new",className:"passwordChangeElement",type:"password",placeholder:"new password"}),o.a.createElement("br",null),o.a.createElement("input",{id:"password_new2",className:"passwordChangeElement",type:"password",placeholder:"repeat new password"}),o.a.createElement("br",null),o.a.createElement("button",{id:"passwordChangeSubmit",className:"passwordChangeElement"},"Submit")))}},{key:"render",value:function(){return o.a.createElement("div",{className:"MainContentWrapper"},o.a.createElement("p",{className:"MainContentTitle"},"Profile"),o.a.createElement("div",{className:"MainContentBody"},o.a.createElement("div",{id:"changePasswordDiv"},o.a.createElement("button",{id:"changePasswordBtn",className:this.getDivClass("changePasswordBtn"),onClick:this.handleChangePasswordBtnClick.bind(this)},"Change Password"),o.a.createElement("div",{id:"changePasswordContentDivWrapper"},this.renderChangePasswordDiv()))))}}]),t}(o.a.Component)),G=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={initialized:!1},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){if("undefined"!==typeof this.props.globalState&&"undefined"!==typeof this.props.globalState.nav&&!this.state.initialized)for(var e in this.props.globalState.nav)if(this.props.globalState.nav[e]){this.setState({initialized:!0});break}}},{key:"determineClass",value:function(e){var t="";if("undefined"!==typeof this.props.globalState.nav)switch(e){case"AccountSettingsContainer":"undefined"!==typeof this.props.globalState.nav.accountSettings_selected&&(this.props.globalState.nav.accountSettings_selected?t+="ContentContainer ":(t+="ContentContainer ContentContainer-SlideOut ",this.state.initialized||(t+="NoTransformationDuration ")));break;case"SystemSettingsContainer":"undefined"!==typeof this.props.globalState.nav.systemSettings_selected&&(this.props.globalState.nav.systemSettings_selected?t+="AdminContentContainer ":(t+="AdminContentContainer ContentContainer-SlideOut ",this.state.initialized||(t+="NoTransformationDuration ")))}return t}},{key:"render",value:function(){return o.a.createElement("div",{id:"MainContentContainer"},o.a.createElement("img",{id:"coverphoto",src:E.a,alt:""}),o.a.createElement("div",{id:"SystemSettingsContainer",className:this.determineClass("SystemSettingsContainer")},o.a.createElement(A,{setGlobalState:this.props.setGlobalState,setPopupState:this.props.setPopupState,globalState:this.props.globalState})),o.a.createElement("div",{id:"AccountSettingsContainer",className:this.determineClass("AccountSettingsContainer")},o.a.createElement(L,{setGlobalState:this.props.setGlobalState,setPopupState:this.props.setPopupState,globalState:this.props.globalState})))}}]),t}(o.a.Component),F=(a(75),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).logout=a.logout.bind(Object(f.a)(a)),a.state={redirect:""===window.localStorage.session_key},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"logout",value:function(){var e={session_key:window.localStorage.session_key},t=this;_.a.ajax({type:"POST",url:m.a.BACKEND_WS_LOGOUT_URL,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){"success"===e.status&&(window.localStorage.session_key="",t.setState({redirect:!0}))},error:function(e,t,a){console.log("failed!")}})}},{key:"renderRedirect",value:function(){if(this.state.redirect)return o.a.createElement(S.a,{to:"/"})}},{key:"render",value:function(){return o.a.createElement("div",{id:"logoutContainer"},this.renderRedirect(),o.a.createElement("button",{id:"logoutBtn",onClick:this.logout},o.a.createElement(C.a,{style:{fontSize:"1.1em",marginRight:"10px"},icon:"door-open"}),"Sign out"))}}]),t}(o.a.Component)),M=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={time:(new Date).toLocaleString("en-GB")},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.intervalID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"tick",value:function(){this.setState({time:(new Date).toLocaleString("en-GB")})}},{key:"render",value:function(){return o.a.createElement("div",{id:"clockdiv"},o.a.createElement("p",{id:"clock",style:{margin:"0px"}},this.state.time))}}]),t}(o.a.Component),x=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).makeSelection=a.makeSelection.bind(Object(f.a)(a)),a.getButtonClass=a.getButtonClass.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.setGlobalState({nav:{accountSettings_selected:!1,systemSettings_selected:!1}},"NavigationMenu")}},{key:"makeSelection",value:function(e){var t={};for(var a in this.props.globalState.nav)t[a]=!1;switch(e.target.id){case"nav_accountSettings":this.props.globalState.nav.accountSettings_selected||(t.accountSettings_selected=!0),this.props.setGlobalState({nav:t},"NavigationMenu");break;case"nav_systemSettings":this.props.globalState.nav.systemSettings_selected||(t.systemSettings_selected=!0),this.props.setGlobalState({nav:t},"NavigationMenu");break;default:console.log("Wrong Nav Selection!")}}},{key:"renderRedirect",value:function(){if(this.state.redirect)return o.a.createElement(S.a,{to:"/login"})}},{key:"getButtonClass",value:function(e){var t="";if("undefined"!==typeof this.props.globalState.nav)switch(e){case"nav_accountSettings":t=this.props.globalState.nav.accountSettings_selected?"NavigationBtn NavigationBtnActive":"NavigationBtn";break;case"nav_systemSettings":t=this.props.globalState.nav.systemSettings_selected?"AdminNavigationBtn NavigationBtnActive":"AdminNavigationBtn";break;default:console.log("Unhandled case!")}return t}},{key:"renderAccountSettings",value:function(){return o.a.createElement("button",{className:this.getButtonClass("nav_accountSettings"),id:"nav_accountSettings",onClick:this.makeSelection},o.a.createElement(C.a,{style:{fontSize:"1.6em",float:"left",position:"relative",marginRight:"10px",color:"white"},icon:"id-card"}),"Profile")}},{key:"renderSystemSettings",value:function(){if(this.props.globalState.is_admin)return o.a.createElement("button",{className:this.getButtonClass("nav_systemSettings"),id:"nav_systemSettings",onClick:this.makeSelection},o.a.createElement(C.a,{style:{fontSize:"1.6em",float:"left",position:"relative",marginRight:"10px"},icon:"sliders-h"}),"System Settings")}},{key:"render",value:function(){return o.a.createElement("div",{id:"NavigationMenuContainer"},this.renderSystemSettings(),this.renderAccountSettings())}}]),t}(o.a.Component),V=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(S.b,{exact:!0,path:"/main",render:function(){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(F,{setGlobalState:e.props.setGlobalState,setPopupState:e.props.setPopupState,globalState:e.props.globalState}),o.a.createElement(M,{setGlobalState:e.props.setGlobalState,setPopupState:e.props.setPopupState,globalState:e.props.globalState})),o.a.createElement("hr",null),o.a.createElement(x,{setGlobalState:e.props.setGlobalState,setPopupState:e.props.setPopupState,globalState:e.props.globalState}))}}))}}]),t}(o.a.Component),W=a(57),z=a.n(W),U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).socket=null,a.state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=z()(m.a.WEB_SOCKET_URL),this.socket.on("server has update",(function(t){return e.handleServerHasUpdate(t)}))}},{key:"handleServerHasUpdate",value:function(e){switch((e=JSON.parse(e)).hasUpdate){case"prometheus_endpoints":this.props.setGlobalState({socket_prometheus_endpoints_updated:!0},"BackgroundService");break;case"prometheus_rules":this.props.setGlobalState({socket_prometheus_rules_updated:!0},"BackgroundService");break;case"alertmanager_config":this.props.setGlobalState({socket_alertmanager_config_updated:!0},"BackgroundService")}}},{key:"getRoomInfo",value:function(){var e={session_key:window.localStorage.session_key},t=this;_.a.ajax({type:"POST",url:m.a.BACKEND_WS_GET_ROOMS_LIST,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){var a=JSON.parse(e.res);t.processRoomData(a.status)}else setTimeout((function(){t.getRoomInfo()}),5e3)},error:function(e,a,n){console.log("failed!"),setTimeout((function(){t.getRoomInfo()}),5e3)},complete:function(){}})}},{key:"processRoomData",value:function(e){this.props.setGlobalState({roomlist:e},"BackgroundService")}},{key:"render",value:function(){return""}}]),t}(o.a.Component),K=a(27),I=(a(107),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"closePopup1",value:function(){var e=Object(R.a)({},this.props.popupState.popup1);e.show=!1,e.title="",e.content="",e.mode="",e.hasCloseBtn=!1,this.props.setPopupState({popup1:e},"PopupService")}},{key:"closePopup2",value:function(){var e=Object(R.a)({},this.props.popupState.popup2);e.show=!1,e.title="",e.content="",e.mode="",e.hasCloseBtn=!1,this.props.setPopupState({popup2:e},"PopupService")}},{key:"closePopupConfirmation",value:function(){var e=Object(R.a)({},this.props.popupState.popupConfirmation);e.show=!1,e.title="",e.yesCallback="",e.yesButtonValue="",e.noCallback="",e.noButtonValue="",e.mode="",e.hasCloseBtn=!1,this.props.setPopupState({popupConfirmation:e},"PopupService")}},{key:"renderPopup",value:function(e,t){var a="",n="";return"common"===e.mode?(a="modal-header-common",n="modal-content-common"):"admin"===e.mode&&(a="modal-header-admin",n="modal-content-admin"),o.a.createElement(o.a.Fragment,null,this.renderXBtn(e.hasCloseBtn,t),o.a.createElement("div",{className:a}," ",e.title," "),o.a.createElement("div",{className:n},e.content))}},{key:"renderXBtn",value:function(e,t){if(e)return o.a.createElement("input",{type:"button",className:"xbtn",onClick:t,style:{fontWeight:"bold"},value:"X"})}},{key:"renderPopupConfirmation",value:function(e,t){var a="",n="";return"common"===e.mode?(a="modal-header-common",n="modal-content-common"):"admin"===e.mode&&(a="modal-header-admin",n="modal-content-admin"),"close"===e.noCallback&&(e.noCallback=t),o.a.createElement(o.a.Fragment,null,this.renderXBtn(e.hasCloseBtn,t),o.a.createElement("div",{className:a}," ",e.title," "),o.a.createElement("div",{className:n},o.a.createElement("button",{className:"modal-submit-btn",id:"yesBtn",onClick:e.yesCallback,value:e.yesButtonValue},"Yes"),o.a.createElement("button",{className:"modal-submit-btn",id:"noBtn",onClick:e.noCallback,value:e.noButtonValue},"No")))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(K.a,{open:this.props.popupState.popup1.show,onClose:this.closePopup1.bind(this),closeOnDocumentClick:!1,contentStyle:{borderRadius:"10px",border:"none",padding:"0",background:"#282828",width:"auto"}},o.a.createElement("div",null,this.renderPopup(this.props.popupState.popup1,this.closePopup1.bind(this)))),o.a.createElement(K.a,{open:this.props.popupState.popup2.show,onClose:this.closePopup2.bind(this),closeOnDocumentClick:!1,contentStyle:{borderRadius:"10px",border:"none",padding:"0",background:"#282828",width:"auto"}},o.a.createElement("div",null,this.renderPopup(this.props.popupState.popup2,this.closePopup2.bind(this)))),o.a.createElement(K.a,{open:this.props.popupState.popupConfirmation.show,onClose:this.closePopupConfirmation.bind(this),closeOnDocumentClick:!1,contentStyle:{borderRadius:"10px",border:"none",padding:"0",background:"#282828",width:"auto"}},o.a.createElement("div",null,this.renderPopupConfirmation(this.props.popupState.popupConfirmation,this.closePopupConfirmation.bind(this)))))}}]),t}(o.a.Component)),J=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={redirectToLoginPage:!1},a.checkSessionKey=a.checkSessionKey.bind(Object(f.a)(a)),a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.globalState.session_checked||this.checkSessionKey()}},{key:"checkSessionKey",value:function(){if("undefined"!==typeof window.localStorage.session_key&&""!==window.localStorage.session_key){var e={session_key:window.localStorage.session_key},t=this;this.props.setPopupState({popup1:{show:!0,title:"Loading",content:o.a.createElement(C.a,{icon:"spinner",spin:!0,style:{fontSize:"2em",margin:"auto",display:"block"}}),mode:"common",hasCloseBtn:!1}},"Session"),_.a.ajax({type:"POST",url:m.a.BACKEND_WS_VALIDATE_SESSION_URL,data:JSON.stringify(e),cache:!1,dataType:"json",contentType:"application/json",success:function(e){if("success"===e.status){var a=JSON.parse(e.res);""!==a.username?(t.props.setGlobalState({is_admin:a.is_admin,username:a.username,session_checked:!0},"Session"),t.props.setPopupState({popup1:{show:!1,title:"",content:"",mode:"common",hasCloseBtn:!1}},"Session")):setTimeout((function(){console.log("rechecking session..."),t.checkSessionKey()}),2e3)}else console.log("session check failed"),window.localStorage.session_key="",t.setState({redirectToLoginPage:!0})},error:function(e,a,n){console.log("session check error!"),window.localStorage.session_key="",t.setState({redirectToLoginPage:!0})}})}else this.setState({redirectToLoginPage:!0})}},{key:"renderRedirect",value:function(){if(this.state.redirectToLoginPage)return o.a.createElement(S.a,{to:"/"})}},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.renderRedirect())}}]),t}(o.a.Component),Q=a(24),H=a(10);Q.b.add(H.e,H.f,H.s,H.q,H.h,H.c,H.d,H.a,H.b,H.m,H.n,H.o,H.t,H.r,H.l,H.g,H.i,H.j,H.p,H.k);var q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).setStateFromChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"DEVELOPMENT"===m.a.MODE&&console.log("global state from "+t),a.setState(e)},a.setPopupStateFromChild=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"DEVELOPMENT"===m.a.MODE&&console.log("popup state from "+t);var n=a.state.popupState;for(var o in e)n[o]=e[o];a.setState({popupState:n})},a.state={session_checked:!1,popupState:{popup1:{show:!1,title:"",content:"",mode:"",hasCloseBtn:!1},popup2:{show:!1,title:"",content:"",mode:"",hasCloseBtn:!1},popupConfirmation:{show:!1,title:"",yesCallback:null,yesButtonValue:"",noCallback:null,noButtonValue:"",mode:"",hasCloseBtn:!1}}},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(h.a,null,o.a.createElement("div",null,o.a.createElement(S.b,{exact:!0,path:"/",render:function(){return o.a.createElement("div",{className:"Login Login-header"},o.a.createElement(b,{setGlobalState:e.setStateFromChild,globalState:e.state}))}}),o.a.createElement(S.b,{exact:!0,path:"/main",render:function(){return o.a.createElement("div",{className:"App App-header"},o.a.createElement(J,{setGlobalState:e.setStateFromChild,globalState:e.state,setPopupState:e.setPopupStateFromChild}),o.a.createElement(U,{setGlobalState:e.setStateFromChild,setPopupState:e.setPopupStateFromChild,globalState:e.state}),o.a.createElement("div",{className:"SidePane"},o.a.createElement(V,{setGlobalState:e.setStateFromChild,setPopupState:e.setPopupStateFromChild,globalState:e.state})),o.a.createElement("div",{className:"MainContent"},o.a.createElement(G,{setGlobalState:e.setStateFromChild,setPopupState:e.setPopupStateFromChild,popupState:e.state.popupState,globalState:e.state})),o.a.createElement(I,{setPopupState:e.setPopupStateFromChild,popupState:e.state.popupState}))}})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},53:function(e,t,a){e.exports=a.p+"static/media/favicon.33d46e7c.ico"},56:function(e,t,a){e.exports=a.p+"static/media/coverphoto.b3c0d98b.jpg"},58:function(e,t,a){e.exports=a(108)},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},8:function(e,t){var a=function(e){var t="",a="http://";e.indexOf("//")>-1?(a=e.split("/")[0]+"//",t=e.split("/")[2]):t=e.split("/")[0];return t=(t=t.split(":")[0]).split("?")[0],a+t}(window.location.href)+":4000";var n={WEB_SOCKET_URL:a,BACKEND_SERVER_URL:a,MODE:"DEVELOPMENT",BACKEND_WS_LOGIN_URL:a+"/login",BACKEND_WS_LOGOUT_URL:a+"/logout",BACKEND_WS_VALIDATE_SESSION_URL:a+"/validate_session",BACKEND_WS_CHANGE_PASSWORD:a+"/change_password",BACKEND_WS_GET_FILE_CONTENTS:a+"/get_file_contents",BACKEND_WS_UPDATE_FILE_CONTENTS:a+"/update_file_contents",BACKEND_WS_RELOAD_SERVICE:a+"/reload_service",FIRST_AVAILABLE_HOUR:9,LAST_AVAILABLE_HOUR:18};e.exports=n}},[[58,1,2]]]);
//# sourceMappingURL=main.be8399ec.chunk.js.map